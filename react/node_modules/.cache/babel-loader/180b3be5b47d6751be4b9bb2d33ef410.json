{"ast":null,"code":"var _jsxFileName = \"/Users/dongbo/Desktop/react/src/pages/display/display.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ClassCropperModal from '../../components/class-cropper-modal/class-cropper-modal';\nimport { http } from '../../api/api';\nimport { Modal, Button } from 'antd';\nimport 'antd/dist/antd.css';\nimport './display.scss';\n\nconst tsIcon = require('../../images/dui.png');\n\nconst jia = require('../../images/add.png');\n\nconst MAX_FILE_SIZE = 5 * 1024 * 1024; // 文件最大限制为5M\n\nclass Display extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      this.setState({\n        title: event.target.value\n      });\n    };\n\n    this.allContent = event => {\n      this.setState({\n        content: event.target.value\n      });\n    };\n\n    this.checkboxOption = event => {\n      this.setState({\n        choose: event.target.value\n      });\n    };\n\n    this.submitAll = () => {\n      if (this.state.content === '') {\n        this.info();\n      }\n\n      if (this.state.title === '') {\n        this.info();\n      }\n\n      if (this.state.classResultImgUrl === null) {\n        this.info();\n      }\n\n      return;\n      http.post('http://kejiadmin.qbitai.com/index.php?r=publish/preview', this.state).then(data => console.log(data, '--=-=-')).catch(err => console.log(err));\n    };\n\n    this.info = () => {\n      Modal.info({\n        title: titleTxt,\n        content: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, titleContent)),\n\n        onOk() {}\n\n      });\n    };\n\n    this.handleClassFileChange = e => {\n      const file = e.target.files[0];\n\n      if (file) {\n        if (file.size <= MAX_FILE_SIZE) {\n          this.setState({\n            classModalFile: file // 先把上传的文件暂存在state中\n\n          }, () => {\n            this.setState({\n              classModalVisible: true // 然后弹出modal\n\n            });\n          });\n        } else {\n          console.log('文件过大');\n        }\n      }\n    };\n\n    this.handleGetResultImgUrl = key => blob => {\n      const str = URL.createObjectURL(blob);\n      this.setState({\n        [key]: str\n      });\n    };\n\n    this.state = {\n      classModalVisible: false,\n      classModalFile: null,\n      classResultImgUrl: null,\n      title: '',\n      choose: '0',\n      content: '',\n      titleTxt: '无内容',\n      titleContent: '无内容'\n    };\n  }\n\n  render() {\n    const _this$state = this.state,\n          classModalVisible = _this$state.classModalVisible,\n          classModalFile = _this$state.classModalFile,\n          classResultImgUrl = _this$state.classResultImgUrl;\n    return React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"con-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"fa\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"\\u53D1\\u5E03\\u4F5C\\u54C1\"), React.createElement(\"div\", {\n      className: \"line\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"flex-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"production\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"zuo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"\\u4F5C\\u54C1\\u540D\\u79F0\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"inputText\",\n      name: \"title\",\n      value: this.state.title,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"explain\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"\\u4F5C\\u54C1\\u4ECB\\u7ECD\\u4E0E\\u64CD\\u4F5C\\u8BF4\\u660E\"), React.createElement(\"textarea\", {\n      name: \"\",\n      id: \"\",\n      cols: \"30\",\n      rows: \"10\",\n      className: \"textAll\",\n      placeholder: \"\\u8FD9\\u91CC\\u53EF\\u4EE5\\u5411\\u5927\\u5BB6\\u4ECB\\u7ECD\\u4F60\\u7684\\u4F5C\\u54C1\\uFF5E\",\n      name: \"content\",\n      value: this.state.content,\n      onChange: this.allContent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"select\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      className: \"hidden-input\",\n      name: \"choose\",\n      value: \"0\",\n      onChange: this.checkboxOption,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"your style about checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), this.state.choose === '0' ? React.createElement(\"img\", {\n      src: tsIcon,\n      className: \"dui\",\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }) : ''), React.createElement(\"div\", {\n      className: \"share\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"\\u516C\\u5F00\\u5206\\u4EAB\"), React.createElement(\"label\", {\n      className: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      className: \"hidden-input\",\n      name: \"choose\",\n      value: \"1\",\n      onChange: this.checkboxOption,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"your style about checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), this.state.choose === '1' ? React.createElement(\"img\", {\n      src: tsIcon,\n      className: \"dui\",\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }) : ''), React.createElement(\"div\", {\n      className: \"share\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"\\u5141\\u8BB8\\u67E5\\u770B\\u6E90\\u4EE3\\u7801\"))), React.createElement(\"div\", {\n      className: \"cover\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"zuo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"\\u4F5C\\u54C1\\u5C01\\u9762\"), React.createElement(\"div\", {\n      className: \"imgAll\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, classResultImgUrl ? React.createElement(\"div\", {\n      className: \"img-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, classResultImgUrl && React.createElement(\"img\", {\n      className: \"img\",\n      src: classResultImgUrl,\n      alt: \"classResultImgUrl\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    })) : '', React.createElement(\"div\", {\n      className: \"jia\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: jia,\n      alt: \"\",\n      className: \"fuhao\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"app\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"half-area\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"upload-input-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      accept: \"image/jpeg,image/jpg,image/png\",\n      className: \"base-upload-input\",\n      onChange: this.handleClassFileChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }))))))))), React.createElement(\"div\", {\n      className: \"btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, classModalVisible && React.createElement(ClassCropperModal, {\n      uploadedImageFile: classModalFile,\n      onClose: () => {\n        this.setState({\n          classModalVisible: false\n        });\n      },\n      onSubmit: this.handleGetResultImgUrl('classResultImgUrl'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"buttom\",\n      onClick: this.submitAll,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"\\u63D0\\u4EA4\\u4F5C\\u54C1\")), React.createElement(\"button\", {\n      className: \"right-btn buttom isShow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"\\u8FD4\\u56DE\\u7F16\\u8F91\"))));\n  }\n\n}\n\nDisplay.propTypes = {\n  classModalVisible: PropTypes.bool,\n  classModalFile: PropTypes.bool,\n  classResultImgUrl: PropTypes.string,\n  title: PropTypes.string,\n  choose: PropTypes.string,\n  content: PropTypes.string,\n  titleTxt: PropTypes.string,\n  titleContent: PropTypes.string\n};\nexport default Display;","map":{"version":3,"sources":["/Users/dongbo/Desktop/react/src/pages/display/display.jsx"],"names":["React","Component","PropTypes","ClassCropperModal","http","Modal","Button","tsIcon","require","jia","MAX_FILE_SIZE","Display","constructor","props","handleChange","event","setState","title","target","value","allContent","content","checkboxOption","choose","submitAll","state","info","classResultImgUrl","post","then","data","console","log","catch","err","titleTxt","titleContent","onOk","handleClassFileChange","e","file","files","size","classModalFile","classModalVisible","handleGetResultImgUrl","key","blob","str","URL","createObjectURL","render","propTypes","bool","string"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types'\nimport ClassCropperModal from '../../components/class-cropper-modal/class-cropper-modal'\nimport { http } from'../../api/api'\nimport { Modal, Button } from 'antd';\nimport 'antd/dist/antd.css';\nimport './display.scss';\nconst tsIcon = require('../../images/dui.png')\nconst jia = require('../../images/add.png')\nconst MAX_FILE_SIZE = 5 * 1024 * 1024 // 文件最大限制为5M\n\nclass Display extends Component {\n  static propTypes= {\n    classModalVisible: PropTypes.bool,\n    classModalFile: PropTypes.bool,\n    classResultImgUrl: PropTypes.string,\n    title: PropTypes.string,\n    choose: PropTypes.string,\n    content: PropTypes.string,\n    titleTxt:PropTypes.string,\n    titleContent:PropTypes.string,\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      classModalVisible: false,\n      classModalFile: null,\n      classResultImgUrl: null,\n      title: '',\n      choose:'0',\n      content:'',\n      titleTxt:'无内容',\n      titleContent: '无内容'\n    }\n  }\n\n  handleChange= (event) =>{\n      this.setState({\n        title: event.target.value\n      })\n  }\n\n  allContent= (event) =>{\n    this.setState({\n      content: event.target.value\n    })\n  }\n\n  checkboxOption= (event) =>{\n      this.setState({\n        choose:event.target.value\n      });\n  }\n\n  submitAll = () =>{\n    if(this.state.content ===''){\n      this.info()\n    }\n    if(this.state.title ===''){\n      this.info()\n    }\n    if(this.state.classResultImgUrl ===null){\n      this.info()\n    }\n    return\n    http.post('http://kejiadmin.qbitai.com/index.php?r=publish/preview',this.state,\n    ).then(data => console.log(data,'--=-=-'))\n    .catch(err => console.log(err)) \n  }\n\n  info =() => {\n    Modal.info({\n      title: titleTxt,\n      content: (\n        <div>\n          <p>{titleContent}</p>\n        </div>\n      ),\n      onOk() {},\n    });\n  }\n\n  handleClassFileChange = e => {\n    const file = e.target.files[0]\n    if (file) {\n      if (file.size <= MAX_FILE_SIZE) {\n        this.setState(\n          {\n            classModalFile: file // 先把上传的文件暂存在state中\n          },\n          () => {\n            this.setState({\n              classModalVisible: true // 然后弹出modal\n            })\n          }\n        )\n      } else {\n        console.log('文件过大')\n      }\n    }\n  }\n\n  handleGetResultImgUrl = key => blob => {\n    const str = URL.createObjectURL(blob)\n    this.setState({\n      [key]: str\n    })\n  }\n\n  render() {\n    const {\n      classModalVisible,\n      classModalFile,\n      classResultImgUrl\n    } = this.state\n    return (\n      <div className=\"content\">\n          <div className=\"con-box\">\n              <span className=\"fa\">发布作品</span>\n              <div className=\"line\"></div>\n              <div className=\"flex-box\">\n                <div className=\"production\">\n                  <div className=\"zuo\">作品名称</div>\n                  <input type=\"text\" className=\"inputText\"  name='title' value={this.state.title}  onChange={this.handleChange} />\n                  <div className=\"explain\">作品介绍与操作说明</div>\n                  <textarea name=\"\" id=\"\" cols=\"30\" rows=\"10\" className=\"textAll\" placeholder=\"这里可以向大家介绍你的作品～\" name='content' value={this.state.content}  onChange={this.allContent} ></textarea>\n                  <div className=\"select\">\n                    <label className=\"left\">\n                        <input type=\"checkbox\" className=\"hidden-input\" name='choose'  value='0' onChange={this.checkboxOption}/>\n                        <span className=\"your style about checkbox\" ></span>\n                        {this.state.choose ==='0' ? <img src={tsIcon} className=\"dui\" alt=\"\"/> : ''}\n                    </label>\n                    <div className=\"share\">公开分享</div>\n\n                    <label className=\"left\">\n                        <input type=\"checkbox\" className=\"hidden-input\" name='choose' value='1'  onChange={this.checkboxOption}/>\n                        <span className=\"your style about checkbox\"></span>\n                        {this.state.choose=== '1' ? <img src={tsIcon} className=\"dui\" alt=\"\"/> : ''}\n                    </label>\n                    <div className=\"share\">允许查看源代码</div>\n                  </div>\n                </div>\n                <div className=\"cover\">\n                  <div className=\"zuo\">作品封面</div>\n                  <div className=\"imgAll\">\n                    {/* <img className=\"imageWh\" src=\"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1561543101261&di=9e8f50486a2ab5d4c527800b3e224fbf&imgtype=0&src=http%3A%2F%2Fwx4.sinaimg.cn%2Fwap720%2F006JOJQuly1fsqmtu4fckj31bg0qoaf5.jpg\" alt=\"\"/>\n                    <img className=\"imageWh\" src=\"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1561543101261&di=9e8f50486a2ab5d4c527800b3e224fbf&imgtype=0&src=http%3A%2F%2Fwx4.sinaimg.cn%2Fwap720%2F006JOJQuly1fsqmtu4fckj31bg0qoaf5.jpg\" alt=\"\"/>\n                    <img className=\"imageWh\" src=\"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1561543101261&di=9e8f50486a2ab5d4c527800b3e224fbf&imgtype=0&src=http%3A%2F%2Fwx4.sinaimg.cn%2Fwap720%2F006JOJQuly1fsqmtu4fckj31bg0qoaf5.jpg\" alt=\"\"/> */}\n                    {classResultImgUrl ?\n                      <div className=\"img-container\">\n                      {classResultImgUrl && (\n                        <img\n                          className=\"img\"\n                          src={classResultImgUrl}\n                          alt=\"classResultImgUrl\"\n                        />\n                      )}\n                     </div>  :''\n                    } \n                    <div className=\"jia\">\n                    <img src={jia} alt=\"\" className=\"fuhao\"/>\n\n                    <div className=\"app\">\n                          <div className=\"half-area\">\n                            <label className=\"upload-input-label\">\n                              <input\n                                type=\"file\"\n                                accept=\"image/jpeg,image/jpg,image/png\"\n                                className=\"base-upload-input\"\n                                onChange={this.handleClassFileChange}\n                              />\n                            </label>\n                          </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n          </div>\n     \n          <div className=\"btn\">\n              {classModalVisible && (\n              <ClassCropperModal\n                uploadedImageFile={classModalFile}\n                onClose={() => {\n                  this.setState({ classModalVisible: false })\n                }}\n                onSubmit={this.handleGetResultImgUrl('classResultImgUrl')}\n              />\n            )}\n            <button className=\"buttom\" onClick={this.submitAll}><span>提交作品</span></button>\n            <button className=\"right-btn buttom isShow\"><span>返回编辑</span></button>\n          </div>\n      </div>\n    );\n  }\n}\n\nexport default Display;\n"]},"metadata":{},"sourceType":"module"}